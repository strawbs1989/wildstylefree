<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wildstyle Radio — Home</title>
  <link rel="stylesheet" href="/test1/style.css">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script defer src="/test1/script.js"></script>
</head>
<body>
<header>
<section id="now-on" class="offair">
<div id="onair-status">Checking Schedule...</div>
<div id="onair-details"></div>
</section>
  <div class="topbar">
    <!-- Brand -->
    <div class="brand">
      <img src="/test1/placeholder.png" alt="logo">
      <div>
        <h1>Wildstyle Radio</h1>
        <div style="font-size:12px;color:var(--muted)">
          United by beats • Powered by passion
        </div>
      </div>
    </div>

    <!-- Right side: Audio + Requests -->
    <div style="display:flex;flex-direction:column;align-items:flex-end;gap:12px;">
      <!-- Single audio element -->
      <audio id="myAudio" preload="none" crossorigin="anonymous"></audio>

      <!-- Play/Pause -->
      <button id="control" class="control" style="background:none;border:none;cursor:pointer;">
        <div id="playdiv" style="display:block">
          <img src="https://wildstyle.vip/test1/images/play.png" width="48" height="48" alt="Play">
        </div>
        <div id="pausediv" style="display:none">
          <img src="https://wildstyle.vip/test1/images/pause.png" width="48" height="48" alt="Pause">
        </div>
      </button>

      <!-- Song Requests -->
      <div id="request-box" class="request-container card" style="padding:8px 12px;max-width:260px;">
        <h3 style="margin:0;font-size:16px;">🎵 Song Requests</h3>
        <p id="request-status" style="margin:4px 0 8px;font-size:13px;">Checking schedule...</p>

        <form id="requestForm" action="https://formspree.io/f/xzzjblby" method="POST" style="display:none;">
          <label for="dj_name" style="font-size:13px;">DJ Name:</label><br>
          <input type="text" id="dj_name" name="dj_name" required><br><br>

          <label for="your_name" style="font-size:13px;">Your Name:</label><br>
          <input type="text" id="your_name" name="your_name" required><br><br>

          <label for="shoutout" style="font-size:13px;">Your Shout-Out:</label><br>
          <input type="text" id="shoutout" name="shoutout" size="40" required><br><br>

          <input type="submit" value="Send">
          <input type="reset" value="Reset">
        </form>

        <div id="success" style="display:none;margin-top:8px;font-size:13px;color:green;">
          ✅ Request sent! Thank you for your shout-out.
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Navigation -->
<nav class="mainnav">
  <div class="container">
    <div class="nav-links">
      <a href="index.html" class="navlink active">Home</a>
      <a href="schedule.html" class="navlink">Schedule</a>
      <a href="djs.html" class="navlink">DJs</a>
    </div>
    <button id="menuToggle" class="hamburger" aria-label="Toggle Menu">☰</button>
  </div>
</nav>

<!-- Mobile Menu -->
<div id="mobileMenu" class="mobile-nav">
  <a href="index.html" class="navlink">Home</a>
  <a href="schedule.html" class="navlink">Schedule</a>
  <a href="djs.html" class="navlink">DJs</a>
</div>

<main class="container">
  <section class="content">
    <!-- Now Playing -->
    <div class="card now-playing">
      <h4>Now Playing</h4>
      <iframe width="320" height="166" frameborder="0" scrolling="no"
        src="https://live365.com/embeds/v1/player/a50378?s=md&m=dark&c=mp3"></iframe>
    </div>

    <!-- Unsigned Artist Showcase -->
    <div class="card" id="showcase">
      <h3>Unsigned Artist Showcase</h3>
      <p style="color:var(--muted)">Spotlight for up-and-coming artists. Submit to requests@wildstyle.vip</p>
      <div class="showcase-grid">
        <img src="/test1/unsigned/tristan.jpg" alt="artist 1">
        <img src="/test1/unsigned/pete.jpg" alt="artist 2">
        <img src="/test1/unsigned/dont.jpg" alt="artist 3">
        <img src="/test1/unsigned/joe.png" alt="artist 4">
      </div>
    </div>

    <!-- DJ Showcase -->
    <div class="card" id="djs">
      <h3>DJ Showcase</h3>
      <div class="dj-card">
        <img src="https://wildstyle.vip/images/babyjayne.jpg" alt="dj showcase">
        <div>
          <h4>Resident DJs</h4>
          <p style="color:var(--muted)">
            Professional DJ profiles. Visit the <a href="djs.html">DJs page</a> for full roster.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- Facebook -->
    <div class="card sidebar-section">
      <h4>Facebook</h4>
      <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fwildstyleuk&tabs=timeline&width=340&height=51&small_header=true&adapt_container_width=false&hide_cover=false&show_facepile=true&appId"
        width="340" height="51" style="border:none;overflow:hidden" scrolling="no" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
    </div>
	
	<!-- Top 10 Most Played -->
<div class="card sidebar-section">
  <h3>🔥 Top 10 Most Played Tracks</h3>
  <!--OnlineRadioBox Top widget-->
<div class="orbC" id="orb_top_1660ba52f9fa40f6">
    <style media="screen">
    .orbC{position:relative;box-sizing:border-box;overflow:hidden;font-weight:normal;border:1px solid;text-align:left}.orbC br,.orbC>br{display:none!important;}.orbC p,.orbC>p{margin:0!important;padding:0!important;line-height:normal!important;font-size:inherit!important}.orbC br,.orbC>br{display:none!important}.orbCh{display:block;position:absolute;z-index:100;top:22px;right:10px;margin-top:-12px;width:21px;text-decoration:none!important;cursor:pointer}.orbCh>img{margin:0!important;border:none!important;height:24px!important;-webkit-filter:drop-shadow(2px 2px 0 rgba(47,99,160,.2));filter:drop-shadow(2px 2px 0 rgba(47,99,160,.2))}.orbCt{display:block;box-sizing:border-box;overflow:hidden;padding-left:10px!important;font-weight:normal;line-height:44px!important;min-height:44px;text-decoration:none!important}.orbCti{float:left!important;margin:10px 10px 10px 0!important;height:24px!important;width:44px!important;border:none!important;border-radius:2px!important;opacity:1!important}.orbCtn{display:block;margin-right:54px!important;font-size:14px!important;font-weight:bold;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.orbIC{position:relative;overflow:auto;overflow-x:hidden;overflow-y:auto;margin:0!important;padding:5px 0!important;list-style:none!important;height:auto!important;float:none!important}.orbICi{box-sizing:border-box;margin:0!important;padding:5px 10px!important;list-style:none!important;background-image:none}.orbICi>a,.orbICi>span{display:block!important;font-weight:normal!important;text-decoration:none!important;font-size:16px!important;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;-webkit-transition:color .125s;transition:color .125s;height:auto!important;border:none!important;text-align:left!important;}.orbICin{display:inline-block!important;vertical-align:middle!important;position:relative;height:40px!important;width:40px!important;margin:0 10px 0 0!important;text-align:center!important;line-height:40px!important;font-size:24px!important;border-radius:50%;background:rgba(220,220,220,.25)!important;box-shadow:0 0 0 1px rgba(0,0,0,.035)inset}.orbICin[data-dynamics]::after{display:block;position:absolute;content:'';right:-6px;width:16px;height:16px;border-radius:50%;background-color:rgba(255,255,255,.85);box-shadow:0 0 0 1px rgba(204,204,204,0.4)inset;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDhweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgNDggMTYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ4IDE2IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSIjRkRCRTEzIiBkPSJNNDQuNyw2LjZsLTIuOS0wLjRsLTEuMy0yLjZsLTEuMywyLjZsLTIuOSwwLjRsMi4xLDJsLTAuNSwyLjlsMi42LTEuNGwyLjYsMS40bC0wLjUtMi45TDQ0LjcsNi42TDQ0LjcsNi42eiIvPjxwYXRoIGZpbGw9IiMzNUFCNjgiIGQ9Ik0xMS45LDcuMkw4LjgsNC4xQzguOCw0LDguNiw0LDguNSw0QzguNCw0LDguMyw0LDguMiw0LjFMNS4xLDcuMkM0LjksNy40LDUsNy42LDUuMiw3LjhzMC41LDAuMiwwLjYsMC4xIEw4LDUuN3Y1LjhDOCwxMS44LDguMiwxMiw4LjUsMTJTOSwxMS44LDksMTEuNVY1LjdsMi4yLDIuMmMwLjEsMC4xLDAuNCwwLjEsMC42LTAuMVMxMi4xLDcuNCwxMS45LDcuMnoiLz48cGF0aCBmaWxsPSIjRDk1MzRGIiBkPSJNMjcuOSw4LjhsLTMuMSwzLjFDMjQuOCwxMiwyNC42LDEyLDI0LjUsMTJjLTAuMSwwLTAuMiwwLTAuMy0wLjFsLTMuMS0zLjFjLTAuMS0wLjEtMC4xLTAuNCwwLjEtMC42IGMwLjItMC4yLDAuNS0wLjIsMC42LTAuMWwyLjIsMi4yVjQuNUMyNCw0LjIsMjQuMiw0LDI0LjUsNFMyNSw0LjIsMjUsNC41djUuOGwyLjItMi4yYzAuMS0wLjEsMC40LTAuMSwwLjYsMC4xIEMyOCw4LjQsMjguMSw4LjYsMjcuOSw4Ljh6Ii8+PC9zdmc+)}.orbICin[data-dynamics="up"]::after{top:0;background-position:0 50%}.orbICin[data-dynamics="down"]::after{bottom:0;background-position:50% 50%}.orbICin[data-dynamics="new"]::after{top:50%;margin-top:-8px;background-position:100% 50%}.orbICii{display:inline-block;vertical-align:middle!important;margin:0 6px 0 0!important;border-radius:4px!important;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xNDMgNTU3IDQ4IDQ4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IC0xNDMgNTU3IDQ4IDQ4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBvcGFjaXR5PSIwLjI0IiBmaWxsPSIjQ0NDQ0NDIiBkPSJNLTEwNiw1NjNsLTE5LDUuNHYyMC40Yy0xLjUtMC43LTMuNy0wLjctNS43LDAuMWMtMy4yLDEuMy01LDQuMi00LjEsNi42IGMwLjksMi4zLDQuNCwzLjIsNy42LDEuOWMzLjItMS4zLDQuMS0zLjQsNC4xLTYuNVY1NzZsMTUtNC40djExLjdjLTEuNS0wLjgtMy42LTAuOS01LjcsMGMtMy4yLDEuMy01LDQuMi00LjEsNi42czQuMiwzLjIsNy40LDEuOSBjMi43LTEuMSw0LjMtMi43LDQuMy01LjRoMFY1NjN6Ii8+PC9zdmc+)no-repeat 50% 50%!important;overflow:hidden!important;height:48px!important;width:48px!important;box-shadow:0 0 0 1px rgba(204,204,204,.33)inset}.orbICii>img{vertical-align:top!important;height:100%!important;width:100%!important}.orbICi+li{border-style:solid!important;border-width:1px 0 0!important} /* Compact */
      .cmpct .orbICi>a,.cmpct .orbICi>span{font-size:12px!important}
      .cmpct .orbICin{height:24px!important;width:24px!important;margin:0 6px 0 0!important;line-height:24px!important;font-size:16px!important}
      .cmpct .orbICin[data-dynamics]::after{right:-6px;width:12px;height:12px}
      .cmpct .orbICin[data-dynamics="up"]::after{top:0;background-position:-2px 50%}
      .cmpct .orbICin[data-dynamics="down"]::after{bottom:0}
      .cmpct .orbICin[data-dynamics="new"]::after{top:50%;margin-top:-8px;background-position:95% 50%}
      .cmpct .orbICii{height:24px!important;width:24px!important;border-radius:3px!important;}
    </style>
    <style media="screen" id="orb_top_1660ba52f9fa40f6_settings">.orbICii{display:inline-block}.orbC{border-style:solid;border-color:#000000!important;border-radius:5px;;background:#fff!important;width:247px}.orbCt{background-color:#0a0a0a!important}.orbCtn{color:#ffffff!important}.orbIC{height:-7px}.orbIC,.orbICin[data-dynamics]::after{background-color:#ffffff!important}.orbICi>a,.orbICi>a:visited,.orbICi>span,.orbICi>a:hover>.orbICin{color:#000000!important}.orbICi>a:hover{color:#f07700!important}.orbICin{color:#f00fd6!important}.orbICi+li{border-color:#c60cb0!important}</style>
    <a class="orbCh" href="https://onlineradiobox.com/uk/" title="Internet Radio" target="_blank"><img src="//ecdn.onlineradiobox.com/img/wl.svg" alt="Internet Radio"></a>
    <a class="orbCt" href="https://onlineradiobox.com/uk/wildstyle/" target="_blank">
      <img class="orbCti" src="//cdn.onlineradiobox.com/img/l/0/52120.v52.png" alt="Wildstyle"><span class="orbCtn" style="display: none;">Wildstyle</span>
    </a>
    <script>
      var orbtop_w = orbtop_w || { lang: "en-us" };
      orbtop_w.cmd = orbtop_w.cmd || [];
      orbtop_w.cmd.push(function() {
        orbtop_w.init("orb_top_1660ba52f9fa40f6");
      });
      var s, t; s = document.createElement('script'); s.type = 'text/javascript';
      s.src = "//ecdn.onlineradiobox.com/js/topwidget.min.e8fea607.js";
      t = document.getElementsByTagName('script')[0]; t.parentNode.insertBefore(s, t);
    </script><ul class='orbIC' top='undefined'></ul></div>
<!--OnlineRadioBox Top widget-->
</div>

    <!-- Featured -->
    <div class="card" id="featured">
      <h3>Featured</h3>
      <div class="featured">
        <img src="https://wildstyle.vip/images/" alt="featured">
        <div><p style="color:var(--muted)">Winner</p></div>
      </div>
    </div>

    <!-- Listen -->
    <div class="card sidebar-section">
      <h4>Listen</h4>
      <div style="margin-top:8px;color:var(--muted)">
        Stream: HLS • <button id="openPlayer" class="btn" style="padding:6px 8px">Open Player</button>
      </div>
    </div>

    <!-- Donate -->
    <div class="card sidebar-section">
      <h4>Support Wildstyle Radio</h4>
      <p style="color:var(--muted); font-size:14px;">Help us keep the music going by donating via PayPal:</p>
      <a href="https://www.paypal.com/donate/?hosted_button_id=3H7L8BG32ELLS" target="_blank" class="btn"
        style="display:inline-block; text-align:center; padding:10px 16px; font-weight:600;">
        🎵 Donate with PayPal
      </a>
    </div>

    <!-- Who's Listening -->
    <div class="card sidebar-section">
      <h4>Who's listening</h4>
      <div id="whoListening">
        <div>Total listeners: <span id="listenerTotal">—</span></div>
        <div>Top locations:</div>
        <ul id="listenerLocations" style="color:var(--muted)">
          <li>Loading…</li>
        </ul>
      </div>
    </div>

    <!-- WSR Info -->
    <div class="card sidebar-section">
      <h4>WSR Info</h4>
      <div id="wsrInfo" style="color:var(--muted)">
        <div id="xrTop">Loading XR info…</div>
        <div id="xrStats" style="margin-top:8px"></div>
      </div>
    </div>
  </aside>
</main>
<script>
// --- Wildstyle "Now On-Air" + Schedule Sync ---
async function updateNowOnAir() {
  const section = document.getElementById("now-on");
  const status = document.getElementById("onair-status");
  const details = document.getElementById("onair-details");

  try {
    // 1️⃣ Get Live365 data
    const res = await fetch("https://api.live365.com/station/a50378");
    const data = await res.json();
    const artist = (data.now_playing?.artist || "").trim();
    const title  = (data.now_playing?.title || "").trim();

    if (!artist && !title) {
      section.className = "offair";
      status.textContent = "🕓 Off Air";
      details.textContent = "No current broadcast";
      return;
    }

    // 2️⃣ Normalize name for comparison
    const currentDJ = artist.toLowerCase();

    // 3️⃣ Custom DJ mapping for mismatched names
const djMap = {
  "autodj": "autodj",
  "james - wizard of rock": "james - wizard of rock",
  "wizard of rock": "james - wizard of rock",
  "james stephen": "james stephen",
  "babyjayne": "babyjayne",
  "lewis": "lewis",
  "dj lewis": "dj lewis",
  "dj echofalls": "dj echofalls",
  "echofalls": "dj echofalls",
  "hotshot": "hotshot",
  "dj hotshot": "hotshot",
  "queen dani": "dj queen dani",
  "dj queen dani": "dj queen dani",
  "dj dezzy mac": "dj dezzy mac",
  "dezzy mac": "dj dezzy mac",
  "dj jaydon mac": "dj jaydon mac",
  "jaydon mac": "dj jaydon mac",
  "steve d j smith": "steve d j smith",
  "steve g": "steve g",
  "steven d": "steven d",
  "mottmuzik": "mottmuzik",
  "vish": "vish",
  "wendell": "wendell",
  "gordan": "gordan",
  "christina": "christina",
  "coll": "coll",
  "j k": "jk",
  "jk": "jk",
  "cam": "cam",
  "the byrdman": "the byrdman",
  "dj european bob": "dj european bob",
  "european bob": "dj european bob",
  "danplayzbangers": "danplayzbangers",
  "dan playz bangers": "danplayzbangers",
  "daniel": "daniel",
  "dj nero": "dj nero",
  "nero": "dj nero",
  "dj mary sailor": "dj mary sailor",
  "mary sailor": "dj mary sailor",
  "rob": "rob - trevor nannab",
  "trevor nannab": "rob - trevor nannab",
  "amar": "dj aj",
  "dj aj": "dj aj",
  "lil devil": "lil devil",
  "rebecca": "rebecca - dj mix n match",
  "dj mix n match": "rebecca - dj mix n match",
  "daniel": "daniel",
  "popped radio": "popped radio",
  "suzette": "popped radio",
  "dani": "dj queen dani",
  "dani - dj queen dani": "dj queen dani",
  "steve d": "steve d j smith",
  "steve smith": "steve d j smith",
  "dj james": "james stephen",
  "dj james stephen": "james stephen",
  "dani queen": "dj queen dani",
  "reese": "reece",
  "reece": "reece"
};

    const mappedDJ = djMap[currentDJ] || currentDJ;

    // 4️⃣ Find matching show from schedule
const allShows = document.querySelectorAll(".show");
let matchedShow = null;
allShows.forEach(show => {
  const dj = show.dataset.dj?.toLowerCase() || "";
  const showName = show.dataset.show?.toLowerCase() || "";
  if (dj.includes(mappedDJ) || mappedDJ.includes(dj)) matchedShow = show;
});


    // 5️⃣ Update DOM
    if (matchedShow) {
      const showTitle = matchedShow.dataset.show;
      const timeSlot  = matchedShow.dataset.time;
      section.className = "onair";
      status.innerHTML = "🔴 Now On Air";
      details.innerHTML = `
        <strong>${artist}</strong><br>
        ${showTitle} <br>
        <span style="font-size:0.9rem;opacity:0.9;">${timeSlot}</span>
      `;
    } else {
      // default fallback if nothing matched
      section.className = "onair";
      status.innerHTML = "🔴 Now On Air";
      details.innerHTML = `<strong>${artist}</strong><br>${title}`;
    }
  } catch (err) {
    console.error("On-air check error:", err);
    section.className = "offair";
    status.textContent = "Error checking stream.";
    details.textContent = "";
  }
}

// Run immediately + refresh every 90 seconds
updateNowOnAir();
setInterval(updateNowOnAir, 90000);
</script>

<footer>
  <div>© Wildstyle Radio</div>
  <div class="social">
    <a href="#">Facebook</a>
    <a href="#">Twitter</a>
    <a href="#">Instagram</a>
    <a href="#">YouTube</a>
  </div>
</footer>
</body>
</html>
